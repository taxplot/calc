(this["webpackJsonp@taxplot/calc-example"]=this["webpackJsonp@taxplot/calc-example"]||[]).push([[0],{54:function(n,t,e){n.exports=e(68)},55:function(n,t,e){},68:function(n,t,e){"use strict";e.r(t);e(55);var r=e(3),a=e.n(r),o=e(51),i=e.n(o),c=e(16),u=e.n(c),s=e(23),l=e(20),p=e(34),y=e(17);function f(){var n=Object(p.a)(["\n    query GetPayrollRates(\n      $year: Int\n      $payerType: PayrollPayerType\n      $filingStatus: String\n      $country: String\n      $jurisdiction: String\n      $income: Float\n    ) {\n      payrolltax(\n        year: $year\n        payerType: $payerType\n        filingStatus: $filingStatus\n        country: $country\n        jurisdiction: $jurisdiction\n        income: $income\n      ) {\n        wageBase\n        additionalHIThreshold\n        payrollTax {\n          name\n          payer\n          rate\n          amount\n        }\n      }\n    }\n  "]);return f=function(){return n},n}function g(){var n=Object(p.a)(["\n    query GetRates(\n      $year: Int\n      $country: String\n      $filingType: String\n      $jurisdiction: String\n      $filingStatus: String\n      $taxType: String\n    ) {\n      taxbrackets(\n        year: $year\n        country: $country\n        filingType: $filingType\n        jurisdiction: $jurisdiction\n        filingStatus: $filingStatus\n        taxType: $taxType\n      ) {\n        taxRate {\n          amountsAbove\n          amountsNotMoreThan\n          plusAmount\n          rate\n        }\n      }\n    }\n  "]);return g=function(){return n},n}class m{constructor(n){var t=Object.assign({year:2021,country:"us",jurisdiction:"federal",taxType:"income",filingType:"individual",filingStatus:"single",deduction:null,income:null},n);for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}}var h,d,x=function(){var n=Object(s.a)(u.a.mark((function n(t,e){var r,a,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new y.ApolloClient({uri:"https://taxql.taxplot.com",cache:new y.InMemoryCache,headers:{authorization:t},onError:({networkError:n,graphQLErrors:t})=>{console.log("graphQLErrors",t),console.log("networkError",n)}}),a=Object(y.gql)(h||(h=g())),n.next=4,r.query({query:a,variables:{year:e.year,country:e.country,filingType:e.filingType,jurisdiction:e.jurisdiction,filingStatus:e.filingStatus,taxType:e.taxType}}).then(n=>n.data.taxbrackets[0].taxRate);case 4:return o=n.sent,n.next=7,o;case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),b=(n,t)=>{var e=0,r=0,a=0;t.deduction||(t.deduction=0);var o=Math.max(0,t.income-t.deduction);return n.forEach(n=>{o>n.amountsAbove&&(o<=n.amountsNotMoreThan||!n.amountsNotMoreThan)&&(e=n.rate,r=(o-n.amountsAbove)*n.rate+n.plusAmount,a=r/t.income)}),{marginalRate:e,taxAmount:r,effectiveRate:a}},j=function(){var n=Object(s.a)(u.a.mark((function n(t,e,r){var a,o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new y.ApolloClient({uri:"https://taxql.taxplot.com",cache:new y.InMemoryCache,headers:{authorization:t},onError:({networkError:n,graphQLErrors:t})=>{console.log("graphQLErrors",t),console.log("networkError",n)}}),o=Object(y.gql)(d||(d=f())),n.next=4,a.query({query:o,variables:{year:e.year,payerType:r?r.toUpperCase():"BOTH",filingStatus:e.filingStatus,country:e.country,jurisdiction:e.jurisdiction,income:e.income}}).then(n=>n.data.payrolltax);case 4:return i=n.sent,n.next=7,i;case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),v=(n,t)=>{var e,r={};n.payrollTax.forEach(a=>{if(a.name){var o=a.name;"OASDI"===o?e=a.rate*Math.min(n.wageBase,t.income):"HI"===o?e=a.rate*t.income:(e=r.HI[a.payer]+a.rate*Math.max(0,t.income-n.additionalHIThreshold),o="HI"),r[o]?r[o][a.payer]=e:r[o]={[a.payer]:e},r[a.payer]?r[a.payer][o]=e:r[a.payer]={[o]:e}}});for(var a=0,o=Object.entries(r);a<o.length;a++){for(var i=Object(l.a)(o[a],2),c=i[0],u=(i[1],0),s=0,p=Object.entries(r[c]);s<p.length;s++){var y=Object(l.a)(p[s],2);y[0];u+=y[1]}r[c].total=u}return r.total=r.OASDI.total+r.HI.total,r},T=()=>{var n=Object(r.useState)({}),t=Object(l.a)(n,2),e=(t[0],t[1]),o=Object(r.useState)({}),i=Object(l.a)(o,2),c=(i[0],i[1]),p=Object(r.useState)({}),y=Object(l.a)(p,2),f=(y[0],y[1]),g=Object(r.useState)({}),h=Object(l.a)(g,2),d=h[0],T=h[1],O="THISISMYTAXPLOTTOKEN",S=new m({filingStatus:"MFJ",income:3e5});return Object(r.useEffect)(()=>{(function(){var n=Object(s.a)(u.a.mark((function n(){var t,r,a,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(O,S);case 2:return t=n.sent,n.next=5,j(O,S,"BOTH");case 5:r=n.sent,a=b(t,S),o=v(r,S),e(t),c(a),f(r),T(o);case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()},[]),a.a.createElement("div",null,JSON.stringify(d),console.log(d))};i.a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.7fe60eee.chunk.js.map